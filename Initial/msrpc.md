# RPC (135/593)

Microsoft Remote Procedure Call is a protocol that uses the client-server model in order to allow one program to request service from a program on another computer without having to understand the details of that computer's network. 

We can query the RPC locator service and individual RPC endpoints to catalog interesting services running over the network. Each UUID value gathered through this process denotes an RPC service.



**<u>Initial Enum:</u>**

```bash
rpcclient -U '' -N $ip
netsharegetinfo [share name]
rpcclient -N $ip

#with creds
rpcclient -U 'username%password' $ip
```

We can use the `rpcdump.py` impacket script to enumerate this port. I stored the output in a text file as it was sizeable.

```bash
python3 /usr/share/doc/python3-impacket/examples/rpcdump.py $ip -p 135 >> rpc.txt
```

RPC commands:

```bash
srvinfo
enumdomusers
querydominfo
querydispinfo

enumprinters

#password policy
getdompwinfo
netshareenum

queryuser [rid]

#try to change passwords, might give access to smb share
setuserinfo2 [username] 23 'Password1'
```

